<mvc:View
	controllerName="carrpasp.controller.RepairTbl"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:semantic="sap.m.semantic"
	xmlns:smartFilterBar="sap.ui.comp.smartfilterbar">

	<Panel
		id="page"
		busy="{detailView>/busy}"
		busyIndicatorDelay="{detailView>/delay}"
		width="100%">
			<smartFilterBar:SmartFilterBar id="smartFilterBar" entityType="REPAIRSType" search="onFilter"
			  visibleInAdvancedArea="true">
				<smartFilterBar:controlConfiguration>
					<smartFilterBar:ControlConfiguration key="REPTYPE" visibleInAdvancedArea="true" />
					<smartFilterBar:ControlConfiguration key="DT" visibleInAdvancedArea="true" />
				</smartFilterBar:controlConfiguration>					
				
			</smartFilterBar:SmartFilterBar>
			<Table
				id="repairItemsList"
				width="auto"
				items="{PASP_REP}"
				updateFinished="onListUpdateFinished"
				noDataText="{i18n>repairNoData}"
				busyIndicatorDelay="{detailView>/lineItemTableDelay}"
				class="sapUiResponsiveMargin"
				>
				
				<headerToolbar>
					<Toolbar id="repairItemsToolbar">
						<Title
							id="repairItemsHeader"
							text="{detailView>/repairTblTitleCount}"/>
						<ToolbarSpacer />
					<Button id="repairAddButton" icon="sap-icon://add" press="onAdd" tooltip="Добавить" />
					<Button id="repairUpdButton" icon="sap-icon://edit" press="onUpd" tooltip="Изменить"/>
					<Button id="repairDelButton" icon="sap-icon://delete" press="onDel" tooltip="Удалить"/>
					</Toolbar>
				</headerToolbar>
				<columns>
					<Column>
						<Text text="{i18n>repairReptype}"/>
					</Column>
					<Column>
						<Text text="{i18n>repairDt}"/>
					</Column>
					<Column>
						<Text text="{i18n>repairSum}"/>
					</Column>
				</columns>
				<items>
					<ColumnListItem type="Active" press=".onLineSelect">
						<cells>
							<Text text="{REPTYPE}"/>
							<Text text="{path:'DT', type:'sap.ui.model.type.Date', pattern: 'dd.MM.yyyy'}"/>
							<ObjectNumber number="{ path: 'SUM', formatter: '.formatter.currencyValue' }"/>
						</cells>
					</ColumnListItem>
				</items>
				<dependents>
			      <Dialog id="repairDialog"
			        title="Данные о ремонте"
			        type="Message"
			        draggable = "true"
					  >
			        <VBox renderType="Bare">
			          <Label text="{i18n>repairReptype}" />
			          <Input id="editReptype" value="{REPTYPE}" />
			          <Label text="{i18n>repairDt}" />
			          <DatePicker id="editDt" 
			           value="{path:'DT', type:'sap.ui.model.type.Date', pattern: 'dd.MM.yyyy',
			             formatOptions: { style: 'short'}}"
			             change="handleChange"/>
			          <Label text="{i18n>repairSum}" />
			          <Input id="editSum" type="Number" value="{path: 'SUM'}" />
			        </VBox>
			        <endButton>
			          <Button
			            text="Отмена"
			            press=".onCancelPress"
			          />
			        </endButton>
			        <beginButton>
			          <Button
			            text="OK"
			            press=".onOkPress"
			          />
			        </beginButton>
			      </Dialog>
			    </dependents>				
			</Table>
	</Panel>

</mvc:View>